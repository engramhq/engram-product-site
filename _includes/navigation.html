<script>
	function handleSignupClicked(url) {
		fetch("https://api.engramhq.xyz/analytics-events", {
			method: "POST",
			headers: {
				"Content-Type": "application/json"
			},
			body: JSON.stringify({
				type: "home_sign_up"
			})
		}).then(() => {
			window.location = url;
		})

		return false;
	}
</script>

<nav>
	<a class="nav-toggle" id="open-nav" href="#">&#9776;</a>
	{% for link in site.data.navigation %}
	{% assign class = "" %}
	{% if link.highlight %}
	{% assign class = class | append: " highlight" %}
	{% endif %}

	{% if link.link == page.url %}
	{% assign class = class | append: " active" %}
	{% endif %}
	<a href="{% include relative-src.html src=link.link %}" class="{{ class }}" {% if link.new_window %}target="_blank" {%
		endif %}>{{ link.name }}</a>
	{% endfor %}
	<a onclick="return handleSignupClicked('https://engram.xyzdigital.com/signup');"
		href="https://engram.xyzdigital.com/signup" class="highlight">Sign up</a>
</nav>